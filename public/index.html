<script>
  async function loadData() {
    try {
      // Fetch player stats
      const playerRes = await fetch('/api/players');
      const playerData = await playerRes.json();
      const players = Object.values(playerData.members || {});

      const container = document.getElementById('players');
      container.innerHTML = '';

      // Render player cards
      players.forEach((player) => {
        const card = document.createElement('div');
        card.className = 'player-card';
        card.innerHTML = `
          <h2>${player.name}</h2>
          <p>Rating: ${player.rating}</p>
          <p>Goals: ${player.goals}</p>
          <p>Assists: ${player.assists}</p>
        `;
        container.appendChild(card);
      });

      // Fetch match history
      const matchRes = await fetch('/api/matches');
      const matches = await matchRes.json();
      console.log('Fetched matches:', matches);

      const matchContainer = document.getElementById('matches');
      if (matchContainer) {
        matchContainer.innerHTML = '<h2>Recent Matches</h2>';
        matches.slice(0, 5).forEach((match) => {
          const div = document.createElement('div');
          div.className = 'match';
          div.innerHTML = `
            <p><strong>Match ID:</strong> ${match.matchId}</p>
            <p><strong>Result:</strong> ${match.clubs[2491998]?.matchResult || 'N/A'}</p>
            <p><strong>Goals Scored:</strong> ${match.clubs[2491998]?.goals || 0}</p>
            <hr />
          `;
          matchContainer.appendChild(div);
        });
      }

    } catch (err) {
      console.error('Error loading data:', err);
    }
  }

  // Run on load
  loadData();
</script>
